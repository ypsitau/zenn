---
title: "L ãƒã‚«ã ã‘ã˜ã‚ƒç‰©è¶³ã‚Šãªã„! pico-jxgLABO ã§ GPIO åˆ¶å¾¡ã®æ·±æ·µã«ã‚‚ãã‚‹"
emoji: "ğŸ‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["çµ„ã¿è¾¼ã¿", "raspberrypi", "pico", "raspberrypipico", "GPIO"]
published: true
---
**pico-jxgLABO** ã¯ã€Pico ãƒœãƒ¼ãƒ‰ã§å®Ÿéš›ã«æ§˜ã€…ãªæ©Ÿèƒ½ã‚’è©¦ã™ã“ã¨ãŒã§ãã‚‹å®Ÿé¨“ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€pico-jxgLABO ã‚’ä½¿ã£ãŸ GPIO ã®åˆ¶å¾¡æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ãŸã‹ãŒ On/Off ã®å…¥å‡ºåŠ›æ©Ÿèƒ½ã¨æ€ã£ã¦ã€è¨­å®šã‚‚ãªã‚“ã¨ãªãã†ã‚„ã‚€ã‚„ã«ã—ã¦ã—ã¾ã„ãŒã¡ã§ã™ãŒã€ã‚³ãƒãƒ³ãƒ‰æ“ä½œã§ã„ã‚ã„ã‚è©¦ã™ã“ã¨ã§ GPIO ã®åˆ¶å¾¡ã‚’ã‚ˆã‚Šæ·±ãç†è§£ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## pico-jxgLABO ã®å°å…¥æ–¹æ³•

ä»¥ä¸‹ã®è¨˜äº‹ã«ã¦ã€pico-jxgLABO ã®å°å…¥æ–¹æ³•ã‚’è©³ã—ãè§£èª¬ã—ã¦ã„ã¾ã™ã€‚ã¾ãšã¯ã“ã®æ‰‹é †ã«å¾“ã£ã¦ç’°å¢ƒã‚’æ•´ãˆã¦ãã ã•ã„ã€‚

https://zenn.dev/ypsitau/articles/2025-08-01-labo-intro

## `gpio` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ãŸ GPIO ã®åˆ¶å¾¡

`gpio` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ GPIO ã®å®Ÿé¨“ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã“ã§ã¯ Pico 2 ã‚’ä½¿ã„ã¾ã™ãŒã€Pico ã§ã‚‚åŒæ§˜ã«å®Ÿé¨“ã§ãã¾ã™ã€‚

### ç¾åœ¨ã® GPIO çŠ¶æ…‹ã®è¡¨ç¤º

å¼•æ•°ãªã—ã§ `gpio` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ç¾åœ¨ã® GPIO ã®çŠ¶æ…‹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```text
L:/>gpio
GPIO0  lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO1  lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO2  lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO3  lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO4  lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO5  lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO6  lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO7  lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO8  lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO9  lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO10 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO11 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO12 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO13 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO14 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO15 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO16 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO17 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO18 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO19 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO20 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO21 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO22 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO23*lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO24*lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO25*lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO26 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO27 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO28 lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO29*lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
```

Pico ã® GPIO ã¯ 0 ã‹ã‚‰ 29 ã¾ã§ã® 30 æœ¬ãŒã‚ã‚Šã¾ã™ã€‚ä¸Šã®çŠ¶æ…‹è¡¨ç¤ºã«ãŠã„ã¦ã€å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ„å‘³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

- äºŒç•ªç›®ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã® `lo`, `hi` ã¯å„ãƒ”ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯å€¤ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚`lo` ã¯ Low (0)ã€`hi` ã¯ High (1) ã‚’æ„å‘³ã—ã¾ã™
- `func` ã¯ GPIO ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‚ã‚‰ã‚ã—ã¾ã™ã€‚`------` ã¯ä½•ã®ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚‚å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ãªã„ (null function) ã“ã¨ã‚’ç¤ºã—ã¾ã™
- `dir` ã¯ãƒ”ãƒ³ã®æ–¹å‘ã‚’ç¤ºã—ã€`in` ã¯å…¥åŠ›ã€`out` ã¯å‡ºåŠ›ã‚’æ„å‘³ã—ã¾ã™
- `pull` ã¯ãƒ—ãƒ«ã‚¢ãƒƒãƒ—/ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æŠµæŠ—ã®è¨­å®šã§ã€`down` ã¯ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã€`up` ã¯ãƒ—ãƒ«ã‚¢ãƒƒãƒ—ã€`none` ã¯ä¸¡æ–¹ã¨ã‚‚ãªã— (ãƒã‚¤ã‚¤ãƒ³ãƒ”ãƒ¼ãƒ€ãƒ³ã‚¹çŠ¶æ…‹) ã€`both` ã¯ä¸¡æ–¹ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™
- `drive` ã¯ãƒ‰ãƒ©ã‚¤ãƒ–å¼·åº¦ã§ã€é€šå¸¸ã¯ 4mA ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™
- `slew` ã¯ã‚¹ãƒ«ãƒ¼ãƒ¬ãƒ¼ãƒˆåˆ¶å¾¡ã§ã€é€šå¸¸ã¯ `slow` ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™
- `hyst` ã¯å…¥åŠ›ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ã®è¨­å®šã§ã€`on` ã¯æœ‰åŠ¹ã€`off` ã¯ç„¡åŠ¹ã‚’ç¤ºã—ã¾ã™

ä¸Šã®çŠ¶æ…‹è¡¨ç¤ºã§ GPIO åã« `*` ãŒã¤ã„ã¦ã„ã‚‹ GPIO23, GPIO24, GPIO25, GPIO29 ã¯å¤–éƒ¨ãƒ”ãƒ³ã«æ¥ç¶šã•ã‚Œã¦ãŠã‚‰ãšã€ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹æ®Šç”¨é€”ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

Pico ãŠã‚ˆã³ Pico 2:

- GPIO23 - OP Controls the on-board SMPS Power Save pin
- GPIO24 - IP VBUS sense - high if VBUS is present, else low
- GPIO25 - OP Connected to user LED
- GPIO29 - IP Used in ADC mode (ADC3) to measure VSYS/3

Pico W ãŠã‚ˆã³ Pico 2 W:

- GPIO23 - OP wireless power on signal
- GPIO24 - OP/IP wireless SPI data/IRQ
- GPIO25 - OP wireless SPI CS - when high also enables GPIO29 ADC pin to read VSYS
- GPIO29 - OP/IP wireless SPI CLK/ADC mode (ADC3) to measure VSYS/3

ã“ã‚Œã‚‰ã®ãƒ”ãƒ³ã¯èª¤ã£ãŸæ“ä½œã‚’ã™ã‚‹ã¨ãƒœãƒ¼ãƒ‰ã®å‹•ä½œã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€`gpio` ã‚³ãƒãƒ³ãƒ‰ã§ã¯æ“ä½œãŒã§ãã¾ã›ã‚“ã€‚ãŸã ã—ã€Pico ã‚„ Pico 2 ã® GPIO25 ã¯å†…è”µ LED ã«ã¤ãªãŒã‚Œã¦ãŠã‚Šã€æ‰‹è»½ã«ä½¿ãˆã¦ä¾¿åˆ©ãªã®ã§ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ `--builtin-led` (ã¾ãŸã¯ `-B`) ã‚’ã¤ã‘ã‚‹ã“ã¨ã§æ“ä½œå¯èƒ½ã«ã—ã¦ã„ã¾ã™ã€‚

### GPIO ãƒ”ãƒ³ç•ªå·ã®æŒ‡å®šæ–¹æ³•

`gpio` ã‚³ãƒãƒ³ãƒ‰ã®æœ€åˆã®å¼•æ•°ã«ã¯ã€GPIO ãƒ”ãƒ³ç•ªå·ã‚’æŒ‡å®šã—ã¾ã™ã€‚å˜ä¸€ã® GPIOãƒ”ãƒ³ç•ªå·ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã—ã€ç¯„å›²ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚

|ã‚³ãƒãƒ³ãƒ‰ã€€      |èª¬æ˜                                 |
|---------------|-------------------------------------|
|`gpio 0`       |GPIO0 ã®çŠ¶æ…‹ã‚’è¡¨ç¤ºã—ã¾ã™               |
|`gpio 2,3,8,9` |GPIO2,3,8,9 ã®çŠ¶æ…‹ã‚’è¡¨ç¤ºã—ã¾ã™         |
|`gpio 2-15`    |GPIO2 ã‹ã‚‰ GPIO15 ã¾ã§ã®çŠ¶æ…‹ã‚’è¡¨ç¤ºã—ã¾ã™|
|`gpio 8-`      |GPIO8 ã‹ã‚‰ GPIO29 ã¾ã§ã®çŠ¶æ…‹ã‚’è¡¨ç¤ºã—ã¾ã™|

å˜ä¸€ã®ãƒ”ãƒ³æ“ä½œã®ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ `gpio0` ã‹ã‚‰ `gpio29` ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¾‹ãˆã° `gpio2` ã¯ `gpio 2` ã¨åŒã˜æ„å‘³ã«ãªã‚Šã¾ã™ã€‚

### ãƒ‡ã‚¸ã‚¿ãƒ«å…¥å‡ºåŠ›ã«ã¤ã„ã¦

#### ãƒ‡ã‚¸ã‚¿ãƒ«å‡ºåŠ›

GPIO ã‚’å‡ºåŠ›ãƒ¢ãƒ¼ãƒ‰ã«è¨­å®šã—ã¦ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ã‚’å‡ºåŠ›ã—ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã¯å†…è”µ LED ãŒæ¥ç¶šã•ã‚ŒãŸ GPIO25 ã« High ãƒ¬ãƒ™ãƒ«ã®ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ã‚’å‡ºåŠ›ã—ã¦ LED ã‚’ç‚¹ç¯ã™ã‚‹ä¾‹ã§ã™ã€‚ã„ã‚ã‚†ã‚‹ L ãƒã‚«ã§ã™ã­ã€‚

```text
L:/>gpio 25 -B func:sio dir:out put:1
```

ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ `func` ã§è¨­å®šã—ã¦ã„ã‚‹ `sio` ã¯ã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ã‚¯ãƒ« IO (Single-cycle IO) ã®ç•¥ã§ã™ã€‚SIO ã¯ CPU ãŒ 1 ã‚µã‚¤ã‚¯ãƒ«ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ç‰¹æ®Šãªãƒ–ãƒ­ãƒƒã‚¯ã§ã€ãã®ãƒ¬ã‚¸ã‚¹ã‚¿ã®ä¸€éƒ¨ãŒ GPIO ã®å…¥å‡ºåŠ›ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ `dir` ã§å‡ºåŠ›ãƒ¢ãƒ¼ãƒ‰ã«è¨­å®šã—ã€`put` ã§å‡ºåŠ›å€¤ã‚’æŒ‡å®šã—ã¾ã™ã€‚

`gpio` ã‚³ãƒãƒ³ãƒ‰ã«ã¯ãƒªãƒ”ãƒ¼ãƒˆå‡¦ç†ã‚’ã™ã‚‹ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ `repeat` ã‚„ã€ãƒ‡ã‚£ãƒ¬ã‚¤ã‚’å®Ÿè¡Œã™ã‚‹ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ `sleep` ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ä½¿ã£ã¦ä»¥ä¸‹ã®ã‚ˆã†ã« LED ã‚’ç‚¹æ»…ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```text
L:/>gpio 25 -B func:sio dir:out repeat:20 {put:1 sleep:100 put:0 sleep:100}
```

å‡ºåŠ›å€¤ã‚’åè»¢ã•ã›ã‚‹ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ `toggle` ã‚’ä½¿ã†ã¨ã€ã•ã‚‰ã«ç°¡å˜ã«ç‚¹æ»…ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```text
L:/>gpio 25 -B func:sio dir:out repeat:20 {toggle sleep:100}
```


ãƒ­ã‚¸ãƒƒã‚¯ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ã‚’ä½¿ã£ã¦ GPIO ã®ä¿¡å·ã‚’è¦³æ¸¬ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```text
L:/>la enable -p 25
L:/>gpio 25 -B func:sio dir:out repeat:20 {toggle sleep:100}
L:/>la print
 Time [usec] P25 
             â”‚  
             :  
        0.00 â””â”€â”
               :
    99208.00 â”Œâ”€â”˜
             :  
   199199.52 â””â”€â”
               :
   299194.56 â”Œâ”€â”˜
             :  
```

`la enable` ã§æ¸¬å®šå¯¾è±¡ã®ãƒ”ãƒ³ã‚’æŒ‡å®šã—ã¦ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’é–‹å§‹ã—ã¦ã‹ã‚‰ GPIO ã®æ“ä½œã‚’è¡Œã„ã€æœ€å¾Œã« `la print` ã§ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚

ã¨ã“ã‚ã§ã€ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚’ SIO ä»¥å¤–ã«è¨­å®šã—ãŸã¨ãã€`put` ã§æŒ‡å®šã—ãŸå‡ºåŠ›å€¤ã¯ã©ã®ã‚ˆã†ã«å½±éŸ¿ã™ã‚‹ã®ã§ã—ã‚‡ã†ã‹? GPIO1 ã« UART RX æ©Ÿèƒ½ã‚’å‰²ã‚Šå½“ã¦ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‡ºåŠ›å€¤ã‚’ High ã«æŒ‡å®šã—ã¦ã¿ã¾ã™ã€‚

```text
L:/>gpio 1 func:uart dir:out put:1
GPIO1  lo~ func:UART0 RX   dir:out pull:down drive:4mA slew:slow hyst:on
```

ãƒ”ãƒ³ã®çŠ¶æ…‹ã¯ `lo~` ã¨ãªã£ã¦ãŠã‚Šã€è¨­å®šå€¤ã¯ç„¡è¦–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ãƒ¬ãƒ™ãƒ«å€¤ã®å¾Œã® `~` ã¯ã€è¨­å®šå€¤ã¨å®Ÿéš›ã®ä¿¡å·ãƒ¬ãƒ™ãƒ«ãŒç•°ãªã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ãŒ SIO ã§ã‚‚ã€ä¿¡å·æ–¹å‘ãŒå…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã«ãªã£ã¦ã„ã‚‹å ´åˆã¯ã‚„ã¯ã‚Šè¨­å®šå€¤ãŒç„¡è¦–ã•ã‚Œã¾ã™ã€‚

```text
L:/>gpio 1 func:sio dir:in put:1
GPIO1  hi  func:SIO        dir:in  pull:down drive:4mA slew:slow hyst:on
```

ã‚ã‚Œã€ãŠã‹ã—ã„ã€‚è¨­å®šå€¤ã¨ä¿¡å·ãƒ¬ãƒ™ãƒ«ãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚å®Ÿã¯ã€ã“ã‚Œã¯ãƒ”ãƒ³çŠ¶æ…‹ãŒãªã‚“ã‚‰ã‹ã®ç†ç”± (ä»Šå›ã®å ´åˆã¯å¾Œè¿°ã™ã‚‹ Pico 2 ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒã‚°ãŒå½±éŸ¿) ã§ High ãƒ¬ãƒ™ãƒ«ã«ãªã£ã¦ã„ã‚‹ã ã‘ã§ã€è¨­å®šå€¤ã‚’åæ˜ ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šå€¤ã‚’ `0` ã«ã—ã¦ã¿ã‚‹ã¨ç„¡è¦–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚

```text
L:/>gpio 1 func:sio dir:in put:0
GPIO1  hi~ func:SIO        dir:in  pull:down drive:4mA slew:slow hyst:on
```

çµè«–ã¨ã—ã¦ã€CPU ã‹ã‚‰ãƒ‡ã‚¸ã‚¿ãƒ«å‡ºåŠ›ã‚’ã™ã‚‹å ´åˆã¯ã€**ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚’ SIO ã«è¨­å®šã—ã¦å‡ºåŠ›ãƒ¢ãƒ¼ãƒ‰ã«ã™ã‚‹**å¿…è¦ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ãã‚Œä»¥å¤–ã®ã¨ãã¯ãƒ‡ã‚¸ã‚¿ãƒ«å‡ºåŠ›ã®è¨­å®šå€¤ãŒãƒ”ãƒ³çŠ¶æ…‹ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ã¯ãªã„ã®ã§ã€å‰¯ä½œç”¨ã‚’å¿ƒé…ã™ã‚‹å¿…è¦ãŒãªã„ã¨ã‚‚ã„ãˆã¾ã™ã€‚

#### ãƒ‡ã‚¸ã‚¿ãƒ«å…¥åŠ›

GPIO ã‚’å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã«è¨­å®šã—ã¦ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ã‚’å…¥åŠ›ã—ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã¯ GPIO1 ã‚’å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã«è¨­å®šã—ã€ä¿¡å·ãƒ¬ãƒ™ãƒ«ã‚’èª­ã¿å–ã‚‹ä¾‹ã§ã™ã€‚GPIO1 ãƒ”ãƒ³ã«ã‚¸ãƒ£ãƒ³ãƒ‘ç·šã‚’ã¤ãªãã€GND ã«æ¥ç¶šã—ã¦ä¿¡å·ã‚’å¤‰åŒ–ã•ã›ã¦ã¿ã¦ãã ã•ã„ã€‚`Ctrl-C` ã§ä¸­æ–­ã§ãã¾ã™ã€‚

```text
L:/>gpio 1 func:sio dir:in pull:up repeat {get sleep:300}
```

ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ `dir` ã§å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã«è¨­å®šã—ã¾ã™ã€‚ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ `pull` ã§ãƒ—ãƒ«ã‚¢ãƒƒãƒ—æŠµæŠ—ã‚’æœ‰åŠ¹ã«ã—ã¦ã„ã‚‹ã®ã¯ã€ãƒ”ãƒ³ãŒã©ã“ã«ã‚‚æ¥ç¶šã•ã‚Œã¦ã„ãªã„ã¨ãã«ä¿¡å·ã‚’ High ã«å›ºå®šã™ã‚‹ãŸã‚ã§ã™ã€‚`get` ã¯ GPIO ã®ä¿¡å·ãƒ¬ãƒ™ãƒ«ã‚’èª­ã¿å–ã‚‹ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚

Pico ã¯ GPIO ã®ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ãŒ SIO ä»¥å¤–ã«è¨­å®šã•ã‚Œã¦ã„ã¦ã‚‚ãƒ”ãƒ³ã®ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ãƒ¬ãƒ™ãƒ«ã‚’ CPU ã§èª­ã¿å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚ŒãŒãƒ‡ã‚¸ã‚¿ãƒ«å‡ºåŠ›ã®ã¨ãã¨ãµã‚‹ã¾ã„ãŒç•°ãªã‚‹ç‚¹ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã¨ UART RX æ©Ÿèƒ½ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸ GPIO1 ã®ä¿¡å·ãƒ¬ãƒ™ãƒ«ã‚’èª­ã¿å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒååˆ†ã«é€Ÿã‘ã‚Œã°ã€é€šä¿¡ä¸­ã® UART ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ“ãƒƒãƒˆå˜ä½ã§ãƒ¢ãƒ‹ã‚¿ãƒ¼ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```text
L:/>gpio 1 func:uart dir:in repeat {get sleep:300}
```

### ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³è¨­å®šã«ã¤ã„ã¦

Pico ã® GPIO ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³è¨­å®šã¨ã„ã†ã¨ã€ä¸‹ã®ãƒ”ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå›³ãŒãŠãªã˜ã¿ã§ã™ã€‚

![pico-pinout.png](/images/2025-08-03-labo-gpio/pico-pinout.png =300x)

ã‚ˆã‚Šè©³ç´°ãªæƒ…å ±ã¯ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

**Pico** - [RP2040 Datasheet](https://datasheets.raspberrypi.com/rp2040/rp2040-datasheet.pdf) 2.19.2 Function select

![pico-function.png](/images/2025-08-03-labo-gpio/pico-function.png)

**Pico 2** - [RP2350 Datasheet](https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf) 9.4. Function select

![pico2-function.png](/images/2025-08-03-labo-gpio/pico2-function.png)

å„ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã«ã¯ F0 ã‹ã‚‰ F31 ã¾ã§ã®ç•ªå·ãŒå‰²ã‚Šãµã‚‰ã‚Œã€F31 ãŒ null function (ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³å‰²ã‚Šå½“ã¦ãªã—) ã«ãªã‚Šã¾ã™ã€‚

pico-jxgLABO ã® `gpio` ã‚³ãƒãƒ³ãƒ‰ã¯ã€ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ `func` ã‚’ä½¿ã£ã¦ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚æŒ‡å®šã§ãã‚‹ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³åã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

**Pico** - `spi`, `uart`, `i2c`, `pwm`, `sio`, `pio0`, `pio1`, `clock`, `usb`, `xip`, `null`
**Pico 2** - `spi`, `uart`, `uart-aux`, `i2c`, `pwm`, `sio`, `pio0`, `pio1`, `pio2`, `clock`, `usb`, `hstx`, `xip-cs1`, `coresight-trace`, `null`

ä¸‹ã®ä¾‹ã§ã¯ã€åˆ©ç”¨å¯èƒ½ãªã™ã¹ã¦ã® GPIO ã‚’ PWM ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚

```text
L:/>gpio 0- func:pwm
GPIO0  lo  func:PWM0 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO1  lo  func:PWM0 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO2  lo  func:PWM1 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO3  lo  func:PWM1 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO4  lo  func:PWM2 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO5  lo  func:PWM2 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO6  lo  func:PWM3 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO7  lo  func:PWM3 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO8  lo  func:PWM4 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO9  lo  func:PWM4 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO10 lo  func:PWM5 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO11 lo  func:PWM5 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO12 lo  func:PWM6 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO13 lo  func:PWM6 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO14 lo  func:PWM7 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO15 lo  func:PWM7 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO16 lo  func:PWM0 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO17 lo  func:PWM0 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO18 lo  func:PWM1 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO19 lo  func:PWM1 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO20 lo  func:PWM2 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO21 lo  func:PWM2 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO22 lo  func:PWM3 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO23*lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO24*lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO25*lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO26 lo  func:PWM5 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO27 lo  func:PWM5 B     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO28 lo  func:PWM6 A     dir:in  pull:down drive:4mA slew:slow hyst:on
GPIO29*lo  func:------     dir:in  pull:down drive:4mA slew:slow hyst:on
```

GPIO ã®ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³è¨­å®šã¯ã€ä¸€åº¦æ±ºã‚ã¦ã—ã¾ã£ãŸã‚‚ã®ã«ã“ã ã‚ã‚ŠãŒã¡ã§ã™ãŒã€æ™‚ã€…ã“ã†ã‚„ã£ã¦åˆ©ç”¨å¯èƒ½ãªé…ç½®ã‚’ã™ã¹ã¦ãªãŒã‚ã¦ã„ã‚‹ã¨ã€ã‚ˆã‚Šä½¿ã„å‹æ‰‹ã®è‰¯ã„è¨­å®šãŒè¦‹ã¤ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

### ãƒ—ãƒ«ã‚¢ãƒƒãƒ—ã¨ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã«ã¤ã„ã¦

GPIO ãƒ”ãƒ³ã®ä¿¡å·ãŒä¸å®šãªçŠ¶æ…‹ã«ãªã‚‰ãªã„ã‚ˆã†ã«ãƒ—ãƒ«ã‚¢ãƒƒãƒ—æŠµæŠ—ã‚„ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æŠµæŠ—ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ”ãƒ³ãŒæ¥ç¶šã•ã‚Œã¦ã„ãªã„ã¨ãã®ä¿¡å·ãƒ¬ãƒ™ãƒ«ã‚’æ˜ç¢ºã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

`gpio` ã‚³ãƒãƒ³ãƒ‰ã§ã¯ã€ãƒ—ãƒ«ã‚¢ãƒƒãƒ—æŠµæŠ—ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ `pull:up`ã€ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æŠµæŠ—ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ `pull:down` ã‚’æŒ‡å®šã—ã¾ã™ã€‚`pull:none` ã‚’æŒ‡å®šã™ã‚‹ã¨ãƒ—ãƒ«ã‚¢ãƒƒãƒ—/ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æŠµæŠ—ã¯ç„¡åŠ¹ã«ãªã‚Šã€ãƒã‚¤ã‚¤ãƒ³ãƒ”ãƒ¼ãƒ€ãƒ³ã‚¹çŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚

ã¨ã“ã‚ã§ã€Pico ã®ãƒ—ãƒ«ã‚¢ãƒƒãƒ—ã€ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã®æŠµæŠ—å€¤ã¯ 25kÎ© ç¨‹åº¦ã ãã†ã§ã™ã€‚ã“ã‚Œã¯ã€ä¾‹ãˆã° I2C é€šä¿¡ã‚’ã—ã‚ˆã†ã¨ã—ã¦ãƒ—ãƒ«ã‚¢ãƒƒãƒ—ã‚’è¨­ã‘ã‚‹éš›ã€æ¨å¥¨ã•ã‚Œã‚‹ãƒ—ãƒ«ã‚¢ãƒƒãƒ—æŠµæŠ—å€¤ã¯ 1kÎ© ã‹ã‚‰ 10kÎ© ãªã®ã§ã€ãã‚Œã«æ¯”ã¹ã‚‹ã¨ã‹ãªã‚Šé«˜ã‚ã§ã™ã€‚I2C ã®å ´åˆã€ãƒ—ãƒ«ã‚¢ãƒƒãƒ—æŠµæŠ—ãŒä½ã„æ–¹ãŒãƒã‚¤ã‚ºã®å½±éŸ¿ã‚’ã†ã‘ã¥ã‚‰ã„ã®ã§ã€é€šä¿¡ã‚¨ãƒ©ãƒ¼ãªã©ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚’é¿ã‘ã‚‹ã«ã¯å¤–éƒ¨ã«ãã¡ã‚“ã¨æŠµæŠ—ã‚’è¨­ã‘ã‚‹ã®ãŒå¾—ç­–ã¨ã„ãˆã¾ã™ (ã¨ã¯è¨€ã„ã¤ã¤ã€ç°¡ä¾¿çš„ã«åˆ©ç”¨ã—ã¦ã—ã¾ã„ãã†ã§ã™ãŒ...)ã€‚

:::message
Pico 2 ã® GPIO ã®è¨­è¨ˆã«ã¯ãƒã‚°ãŒã‚ã£ã¦ã€ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³è¨­å®šãŒæ­£ã—ãæ©Ÿèƒ½ã—ãªã„ã‚ˆã†ã§ã™ (è©³ç´°ã¯[ã“ã¡ã‚‰](https://fabscene.com/new/news/raspberry-pi-rp2350-a4-rp2354-announcement/))ã€‚

å®Ÿéš›ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ Pico 2 ã§å®Ÿè¡Œã™ã‚‹ã¨:

```text
L:/>gpio 1 func:sio dir:in pull:down repeat {get sleep:300}
```

ãƒ”ãƒ³ãŒã©ã“ã«ã‚‚æ¥ç¶šã•ã‚Œã¦ã„ãªã„ã¨ãã¯å¸¸ã« Low ãƒ¬ãƒ™ãƒ«ã«ãªã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã‚‹ã®ã«ã€å®Ÿéš›ã¯ä¸å®‰å®šãªçŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚Pico 2 ã®ãƒ”ãƒ³ã‚’ç¢ºå®Ÿã«ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã•ã›ã‚‹ã«ã¯ã€å¤–éƒ¨æŠµæŠ—ãŒå¿…è¦ã§ã™ã€‚

ã“ã®ç¾è±¡ã¯ãƒãƒƒãƒ—ã®åˆ»å°ãŒ "P2350A0A2" ã§ã‚ã‚‹å ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚2025å¹´7æœˆ29æ—¥ã«ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã•ã‚ŒãŸä¿®æ­£ç‰ˆã®ãƒãƒƒãƒ—ã§ã¯ "P2350A0A4" ã¨ãªã£ã¦ãŠã‚Šã€ã“ã®ç‰ˆã§ã¯ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æŠµæŠ—ãŒæ­£ã—ãæ©Ÿèƒ½ã™ã‚‹ãã†ã§ã™ã€‚
:::

### ãƒ‰ãƒ©ã‚¤ãƒ–å¼·åº¦ã«ã¤ã„ã¦

GPIO ã®ãƒ‰ãƒ©ã‚¤ãƒ–å¼·åº¦ã¯ã€å‡ºåŠ›ä¿¡å·ã®é›»æµã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®è¨­å®šã§ã™ã€‚é€šå¸¸ã¯ 4mA ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ãŒã€`gpio` ã‚³ãƒãƒ³ãƒ‰ã§ã¯ `drive` ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ãƒ‰ãƒ©ã‚¤ãƒ–å¼·åº¦ã‚’ 2mA, 4mA, 8mA, 12mA ã«å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãã‚Œã§ã¯ã€å®Ÿéš›ã«ã©ã‚Œã ã‘ã®é›»æµãŒæµã‚Œã‚‹ã®ã‹? GPIO ãƒ”ãƒ³ã«é›»æµè¨ˆã‚’ã¤ãªã’ã¦ (ã¡ã‚‡ã£ã¨å±ãªã„!)ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ãã‚Œãã‚Œå®Ÿè¡Œã—ã¾ã—ãŸã€‚Pico å†…éƒ¨æŠµæŠ—ã®å½±éŸ¿ã‚’ãªãã™ãŸã‚ã€ãƒ—ãƒ«ã‚¢ãƒƒãƒ—ã¨ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æŠµæŠ—ã¯ç„¡åŠ¹ã«ã—ã¦ã„ã¾ã™ã€‚

åãå‡ºã—é›»æµæ¸¬å®šç”¨ã®ã‚³ãƒãƒ³ãƒ‰:

```text
L:/>gpio 1 func:sio dir:out pull:none drive:2mA put:1
L:/>gpio 1 func:sio dir:out pull:none drive:4mA put:1
L:/>gpio 1 func:sio dir:out pull:none drive:8mA put:1
L:/>gpio 1 func:sio dir:out pull:none drive:12mA put:1
```

å¸ã„è¾¼ã¿é›»æµæ¸¬å®šç”¨ã®ã‚³ãƒãƒ³ãƒ‰:

```text
L:/>gpio 1 func:sio dir:out pull:none drive:2mA put:0
L:/>gpio 1 func:sio dir:out pull:none drive:4mA put:0
L:/>gpio 1 func:sio dir:out pull:none drive:8mA put:0
L:/>gpio 1 func:sio dir:out pull:none drive:12mA put:0
```

Pico ã¨ Pico 2 ã§ãã‚Œãã‚Œè¨ˆæ¸¬ã—ãŸçµæœã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

åãå‡ºã—é›»æµ:

|`drive` è¨­å®š|Pico|Pico 2|
|:--:|:--:|:--:|
|2mA|20.2mA|20.3mA|
|4mA|30.0mA|30.0mA|
|8mA|48.0mA|48.7mA|
|12mA|56.5mA|57.1mA|

å¸ã„è¾¼ã¿é›»æµ:

|`drive` è¨­å®š|Pico|Pico 2|
|:--:|:--:|:--:|
|2mA|25.6mA|27.6mA|
|4mA|37.5mA|40.6mA|
|8mA|61.2mA|67.1mA|
|12mA|72.2mA|79.0mA|


ãƒ‰ãƒ©ã‚¤ãƒ–å¼·åº¦ã®è¨­å®šå€¤ã¯ã€å®Ÿéš›ã®é›»æµå€¤ã¨ã‹ãªã‚Šä¹–é›¢ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€Pico ã® GPIO ã®ãƒ‰ãƒ©ã‚¤ãƒ–å¼·åº¦ã¯ã€ã‚ãã¾ã§ç›®å®‰ã§ã‚ã‚Šã€å®Ÿéš›ã®é›»æµå€¤ã¯è² è·ã‚„å›è·¯ã®ç‰¹æ€§ã«ã‚ˆã£ã¦å¤‰åŒ–ã™ã‚‹ãŸã‚ã ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

Pico ã¨ Pico2 ã®æ¯”è¼ƒã§ã¯ã€å¸ã„è¾¼ã¿é›»æµã«ãŠã„ã¦ Pico 2 ã®æ–¹ãŒè‹¥å¹²å¤§ããã€åãå‡ºã—é›»æµã§ã¯ã»ã¨ã‚“ã©é•ã„ãŒè¦‹ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚

ç¤ºã•ã‚Œã¦ã„ã‚‹å€¤ãŒç›¸å¯¾çš„ãªç›®å®‰ã«ã™ããªã„ã¨ã¯ã„ãˆã€è¨­å®šå€¤ã‚’ä¸Šã’ãŸã¨ãã«åˆ¶å¾¡ã§ãã‚‹é›»æµå€¤ãŒå¢—ãˆã‚‹ã“ã¨ã¯ç¢ºã‹ã§ã™ã€‚è² è·ã®é«˜ã„ãƒ‡ãƒã‚¤ã‚¹ã‚’æ¥ç¶šã™ã‚‹ã¨ãã«å½¹ç«‹ã¤ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

### Slew ãƒ¬ãƒ¼ãƒˆã«ã¤ã„ã¦

GPIO ã®ã‚¹ãƒ«ãƒ¼ãƒ¬ãƒ¼ãƒˆåˆ¶å¾¡ã¯ã€ä¿¡å·ã®ç«‹ã¡ä¸ŠãŒã‚Šã¨ç«‹ã¡ä¸‹ãŒã‚Šã®é€Ÿåº¦ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®è¨­å®šã§ã™ã€‚é€šå¸¸ã¯ `slow` ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ãŒã€`gpio` ã‚³ãƒãƒ³ãƒ‰ã§ã¯ `slew` ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ `slow` ã¨ `fast` ã®2ã¤ã®è¨­å®šã‚’é¸æŠã§ãã¾ã™ã€‚

ãŸã ã€æ‰‹å…ƒã®ç’°å¢ƒã§ã¯ã€ã‚¹ãƒ«ãƒ¼ãƒ¬ãƒ¼ãƒˆã‚’ `fast` ã«è¨­å®šã—ã¦ã‚‚ã€å®Ÿéš›ã®ä¿¡å·ã®å¤‰åŒ–ã‚’è¦³æ¸¬ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚

### ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ã«ã¤ã„ã¦

GPIO ã®ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹æ©Ÿèƒ½ã¯ã€ã‚†ã£ãã‚Šã—ãŸå¤‰åŒ–ã®ä¿¡å·ã‚„ãƒã‚¤ã‚ºã®å½±éŸ¿ã‚’é™¤ããŸã‚ã«è¨­ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚é€šå¸¸ã¯ `on` ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ãŒã€`gpio` ã‚³ãƒãƒ³ãƒ‰ã§ã¯ `hyst` ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ `off` ã«è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ã‚’ `off` ã«è¨­å®šã™ã‚‹ã¨ã€ã‚†ã£ãã‚Šã¨å¤‰åŒ–ã™ã‚‹å…¥åŠ›ä¿¡å·ã«å¯¾ã—ã¦ä¸å®‰å®šã«ãªã‚Šã€High/Low ãŒãƒ‘ã‚¿ãƒ‘ã‚¿ã¨åˆ‡ã‚Šæ›¿ã‚ã‚‹ã¯ãšã§ã™ã€‚ä»¥ä¸‹ã®å›è·¯ã‚’ä½¿ã£ã¦å®Ÿé¨“ã—ã¦ã¿ã¾ã—ãŸã€‚

![circuit-cr.png](/images/2025-08-03-labo-gpio/circuit-cr.png)

æ™‚å®šæ•°ã¯ $CR=1000 \cdot 100 \cdot 10^{-6}$ = 100msec ã«ãªã‚Šã¾ã™ã€‚GPIO0 ã§ 1000msec ã ã‘ high ã«ãªã‚‹ã‚ˆã†ãªçŸ©å½¢æ³¢ã‚’ç”Ÿæˆã—ã€GPIO2 ã¨ GPIO3 ã§ãã‚Œã‚’è¦³æ¸¬ã—ã¾ã™ã€‚

ã¾ãšã¯ä¸¡æ–¹ã®ãƒ”ãƒ³ã®ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ã‚’æœ‰åŠ¹ã«ã—ã€åŒã˜æ¡ä»¶ã§å®Ÿé¨“ã—ã¾ã™ (Pico 2 ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚Pico ã®å ´åˆã¯ `pio2` ã®éƒ¨åˆ†ã‚’ `pio1` ã«ã—ã¦ãã ã•ã„)ã€‚

```text
L:/>gpio 2,3 func:pio2 pull::none
L:/>gpio 2 hyst:on
L:/>gpio 3 hyst:on
L:/>la enable --samplers:4 -p 0,*,2,3
L:/>gpio 0 func:sio dir:out put:0 sleep:1000 put:1 sleep:1000 put:0
L:/>la print --reso:300000
```

çµæœã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

```text
 Time [usec] P0      P2  P3  
             â”‚       â”‚   â”‚  
        0.00 â””â”€â”     â”‚   â”‚  
   134383.46   â”‚     â””â”€â” â”‚  
   134556.04   â”‚       â”‚ â””â”€â”
               â”‚       â”‚   â”‚
               â”‚       â”‚   â”‚
   999803.38 â”Œâ”€â”˜       â”‚   â”‚
  1279721.92 â”‚         â”‚ â”Œâ”€â”˜
  1282086.20 â”‚       â”Œâ”€â”˜ â”‚  
 Time [usec] P0      P2  P3  
```

æ™‚å®šæ•°ã®å½±éŸ¿ã‚’å—ã‘ã¦ã€GPIO0 ã®å¤‰åŒ–ã«å¯¾ã—ã¦ 130msec ã»ã©é…å»¶ã—ã¦ GPIO2 ã¨ GPIO3 ãŒåå¿œã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚GPIO2 ã¨ GPIO3 ãŒãšã‚Œã¦è¦‹ãˆã¾ã™ãŒã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®æ•°å€¤ã‚’è¦‹ã‚‹ã¨ã»ã¼åŒæ™‚åˆ»ã«åå¿œã—ã¦ã„ã¾ã™ã€‚

ãã‚Œã§ã¯æ¬¡ã« GPIO3 ã®ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ã‚’ç„¡åŠ¹ã«ã—ã¦å®Ÿé¨“ã—ã¾ã™ã€‚

```text
L:/>gpio 2,3 func:pio2 pull::none
L:/>gpio 2 hyst:on
L:/>gpio 3 hyst:off
L:/>la enable --samplers:4 -p 0,*,2,3
L:/>gpio 0 func:sio dir:out put:0 sleep:1000 put:1 sleep:1000 put:0
L:/>la print --reso:300000
```

çµæœã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

```text
 Time [usec] P0      P2  P3  
             â”‚       â”‚   â”‚  
        0.00 â””â”€â”     â”‚   â”‚  
   124398.68   â”‚     â”‚   â””â”€â”
   133327.28   â”‚     â””â”€â”   â”‚
               â”‚       â”‚   â”‚
               â”‚       â”‚   â”‚
  1000026.48 â”Œâ”€â”˜       â”‚   â”‚
  1224540.98 â”‚         â”‚ â”Œâ”€â”˜
  1275310.10 â”‚       â”Œâ”€â”˜ â”‚  
 Time [usec] P0      P2  P3  
```

ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ã‚’ç„¡åŠ¹ã«ã—ãŸ GPIO3 ã®æ–¹ãŒã€GPIO2 ã‚ˆã‚Šã‚‚æ—©ãåå¿œã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ã—ã‹ã—æ®‹å¿µãªãŒã‚‰ (?)ã€å½“åˆäºˆæƒ³ã—ã¦ã„ãŸä¸å®‰å®šã«ãªã‚‹ç¾è±¡ã¯è¦³æ¸¬ã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚

## C/C++ API ã¨ã®é–¢é€£

`gpio` ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã«ç›¸å½“ã™ã‚‹ Pico SDK ã® API ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

| ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰     | Pico SDK API |
|-----------------|-------|
| `func`          | `gpio_set_function(uint gpio, gpio_function_t fn)` |
| `dir`           | `gpio_set_dir(uint gpio, bool out)` |
| `put`           | `gpio_put(uint gpio, bool value)` |
| `get`           | `bool gpio_get(uint gpio)` |
| `pull`          | `gpio_set_pulls(uint gpio, bool up, bool down)` |
| `drive`         | `gpio_set_drive_strength(uint gpio, enum gpio_drive_strength drive)` |
| `slew`          | `gpio_set_slew_rate(uint gpio, enum gpio_slew_rate slew)` |
| `hyst`          | `gpio_set_input_hysteresis_enabled(uint gpio, bool enabled)` |

`gpio` ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã«ç›¸å½“ã™ã‚‹ [pico-jxglib](https://zenn.dev/ypsitau/articles/2025-01-24-jxglib-intro) ã® API ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

| ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰     | pico-jxglib API |
|-----------------|-------|
| `func`          | `GPIO::set_function(gpio_function_t fn)` |
| `dir`           | `GPIO::set_dir(bool out)` |
| `put`           | `GPIO::put(bool value)` |
| `get`           | `bool GPIO::get()` |
| `pull`          | `GPIO::set_pulls(bool up, bool down)` |
| `drive`         | `GPIO::set_drive_strength(enum gpio_drive_strength drive)` |
| `slew`          | `GPIO::set_slew_rate(enum gpio_slew_rate slew)` |
| `hyst`          | `GPIO::set_input_hysteresis_enabled(bool enabled)` |

## ã¾ã¨ã‚

ã“ã®è¨˜äº‹ã§ã¯ã€pico-jxgLABO ã‚’ä½¿ã£ã¦ GPIO ã®åˆ¶å¾¡æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚GPIO ã®åŸºæœ¬çš„ãªå…¥å‡ºåŠ›æ“ä½œã‹ã‚‰ã€ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³è¨­å®šã€ãƒ—ãƒ«ã‚¢ãƒƒãƒ—/ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æŠµæŠ—ã€ãƒ‰ãƒ©ã‚¤ãƒ–å¼·åº¦ã€ã‚¹ãƒ«ãƒ¼ãƒ¬ãƒ¼ãƒˆåˆ¶å¾¡ã€ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹æ©Ÿèƒ½ã¾ã§ã€ã•ã¾ã–ã¾ãªè¨­å®šã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚
ã“ã‚Œã‚‰ã®è¨­å®šã‚’ç†è§£ã™ã‚‹ã“ã¨ã§ã€GPIO ã®åˆ¶å¾¡ã‚’ã‚ˆã‚Šæ·±ãç†è§£ã—ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ´»ç”¨ã«å½¹ç«‹ã¦ã‚‹ã“ã¨ãŒã§ãã‚‹ã§ã—ã‚‡ã†ã€‚
