---
title: "pico-jxblib ã¨ TFT LCD ã®è©±"
emoji: "ğŸŒŠ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["çµ„ã¿è¾¼ã¿", "raspberrypi", "pico", "raspberrypipico"]
published: true
---
**pico-jxglib** ã¯ã€ãƒ¯ãƒ³ãƒœãƒ¼ãƒ‰ãƒã‚¤ã‚³ãƒ³ Raspberry Pi Pico ã® Pico SDK ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

https://zenn.dev/ypsitau/articles/2025-01-24-jxglib-intro

ä»Šå›ã¯ã€**pico-jxglib** ã‚’ä½¿ã£ã¦ TFT LCD ã®æç”»ã‚’ã—ã¾ã™ã€‚

## TFT LCD ã«ã¤ã„ã¦

CPU ã«æ¥ç¶šã™ã‚‹å‘¨è¾ºæ©Ÿå™¨ã§ä¸€ç•ªéŠã³å¿ƒã‚’ãã™ãã‚‹ã®ã¯ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤é–¢é€£ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚å®Ÿç”¨é¢ã«ãŠã„ã¦ã‚‚ã€æ–‡å­—ã‚„ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãªã©ãƒ¦ãƒ¼ã‚¶ã«ä¼é”ã§ãã‚‹æƒ…å ±é‡ã¯ãƒ”ã‚«ã‚¤ãƒã§ã™ã€‚æ•°ã‚ã‚‹ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã®ä¸­ã§ã‚‚ã€ãƒ¯ãƒ³ãƒœãƒ¼ãƒ‰ãƒã‚¤ã‚³ãƒ³ã« SPI ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æ¥ç¶šã§ãã‚‹ TFT LCD ã¯ã€ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãªã‚µã‚¤ã‚ºã¨æ‰‹ã”ã‚ãªä¾¡æ ¼ã§éå¸¸ã«é­…åŠ›çš„ãªãƒ‡ãƒã‚¤ã‚¹ã§ã™ã€‚

ã¨ã“ã‚ã§ã€åƒ•ã¯é›»å­éƒ¨å“ã®èª¿é”ã«ä¸»ã«ç§‹æœˆé›»å­ã¨ Amazon ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã‚‰ã®ã‚·ãƒ§ãƒƒãƒ—ã§ã€ŒTFT LCDã€ã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã—ã¦è¦‹ã¤ã‘ãŸä»¥ä¸‹ã®ãƒ‡ãƒã‚¤ã‚¹ã‚’è³¼å…¥ã—ã¾ã—ãŸã€‚

- **ST7789**
  å·¦ã®ãƒ‡ãƒã‚¤ã‚¹ãŒ 1.8 ã‚¤ãƒ³ãƒãƒ»ãƒ”ã‚¯ã‚»ãƒ«æ•° 240x320ã€å³ãŒ 1.3 ã‚¤ãƒ³ãƒãƒ»ãƒ”ã‚¯ã‚»ãƒ«æ•° 240x240 ã§ã™ã€‚ãã‚Œãã‚Œ 1,000 å††ç¨‹åº¦ã§è³¼å…¥ã§ãã¾ã™
  ![ST7789.jpg](/images/2025-01-27-tft-lcd/ST7789.jpg)
- **ST7735**
  å·¦ã®ãƒ‡ãƒã‚¤ã‚¹ãŒ 0.96 ã‚¤ãƒ³ãƒãƒ»ãƒ”ã‚¯ã‚»ãƒ«æ•° 80x160ã€å³ãŒ 1.8 ã‚¤ãƒ³ãƒãƒ»ãƒ”ã‚¯ã‚»ãƒ«æ•° 128x160 ã§ã™ã€‚ãã‚Œãã‚Œ 1,000 å††æœªæº€ã§è³¼å…¥ã§ãã¾ã™ã€‚
  ![ST7735.jpg](/images/2025-01-27-tft-lcd/ST7735.jpg)
- **ILI9341/ILI9488**
  ã‚¿ãƒƒãƒã‚¹ã‚¯ãƒªãƒ¼ãƒ³ä»˜ãã®ãƒ‡ãƒã‚¤ã‚¹ã§ã™ã€‚å·¦ãŒ ILI9341 ã§ 2.8 ã‚¤ãƒ³ãƒãƒ»ãƒ”ã‚¯ã‚»ãƒ«æ•° 240x320ã€å³ãŒ ILI9488 ã§ 3.5 ã‚¤ãƒ³ãƒãƒ»ãƒ”ã‚¯ã‚»ãƒ«æ•° 320x480 ã§ã™ã€‚å€¤æ®µã¯ãã‚Œãã‚Œ 1,500 å††ã€2,500 å††ç¨‹åº¦ã§ã™
  ![ILI9341_ILI9488.jpg](/images/2025-01-27-tft-lcd/ILI9341_ILI9488.jpg)

ä¸Šã«æŒ™ã’ãŸãƒ‡ãƒã‚¤ã‚¹ãŸã¡ã¯ã€åˆæœŸåŒ–ã«å¿…è¦ãªæ‰‹é †ã‚„ VRAM ã®æç”»æ–¹å‘ã€ãƒ”ã‚¯ã‚»ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ã«è‹¥å¹²ã®é•ã„ã¯ã‚ã‚Šã¾ã™ãŒã€ã‚³ãƒãƒ³ãƒ‰ã¯ã»ã¼å…±é€šã—ã¦ã„ã¾ã™ã€‚ä»Šå›ã®è¨˜äº‹ã§ã¯ã€**pico-jxglib** ã§ã“ã‚Œã‚‰ã®ãƒ‡ãƒã‚¤ã‚¹ã«ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚„æ–‡å­—ã‚’æç”»ã—ã¾ã™ã€‚

## æº–å‚™ã™ã‚‹ã‚‚ã®

Visual Studio Code ã‚„ Git ãƒ„ãƒ¼ãƒ«ã€Pico SDK ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒæ¸ˆã‚“ã§ã„ãªã„æ–¹ã¯[ã€ŒPico SDK ã“ã¨ã¯ã˜ã‚ã€](https://zenn.dev/ypsitau/articles/2025-01-17-picosdk#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83) ã‚’ã”è¦§ãã ã•ã„ã€‚

GitHub ã‹ã‚‰ **pico-jxglib** ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã™ã€‚

```bash
git clone https://github.com/ypsitau/pico-jxglib.git
cd pico-jxglib
git submodule update --init
```

:::message
**pico-jxglib** ã¯ã»ã¼æ¯æ—¥æ›´æ–°ã•ã‚Œã¦ã„ã¾ã™ã€‚ã™ã§ã«ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ã„ã‚‹å ´åˆã¯ã€`pico-jxglib` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦æœ€æ–°ã®ã‚‚ã®ã«ã—ã¦ãã ã•ã„ã€‚

```bash
git pull
```

:::

## TFT LCD ã®æç”»

### ST7789 ã®æ¥ç¶š

ãƒ‡ãƒã‚¤ã‚¹ **ST7789 (ãƒ”ã‚¯ã‚»ãƒ«æ•° 240x320)** ã‚’æ¥ç¶šã—ã¦æç”»å‡¦ç†ã‚’ã—ã¾ã™ã€‚

ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã®é…ç·šã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

![circuit-st7789.png](/images/2025-01-27-tft-lcd/circuit-st7789.png)

VSCode ã®ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã‹ã‚‰ `>Raspberry Pi Pico: New Pico Project` ã‚’å®Ÿè¡Œã—ã€ä»¥ä¸‹ã®å†…å®¹ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚Pico SDK ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã®è©³ç´°ã‚„ã€ãƒ“ãƒ«ãƒ‰ã€ãƒœãƒ¼ãƒ‰ã¸ã®æ›¸ãè¾¼ã¿æ–¹æ³•ã«ã¤ã„ã¦ã¯[ã€ŒPico SDK ã“ã¨ã¯ã˜ã‚ã€](https://zenn.dev/ypsitau/articles/2025-01-17-picosdk#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90%E3%81%A8%E7%B7%A8%E9%9B%86) ã‚’å‚ç…§ãã ã•ã„ã€‚

- **Name** ... ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ã—ã¾ã™ã€‚ä»Šå›ã¯ä¾‹ã¨ã—ã¦ `lcdtest` ã‚’å…¥åŠ›ã—ã¾ã™
- **Board type** ... ãƒœãƒ¼ãƒ‰ç¨®åˆ¥ã‚’é¸æŠã—ã¾ã™
- **Location** ... ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‹ä¸€ã¤ä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é¸æŠã—ã¾ã™
- **Stdio support** .. Stdio ã«æ¥ç¶šã™ã‚‹ãƒãƒ¼ãƒˆ (UART ã¾ãŸã¯ USB) ã‚’é¸æŠã—ã¾ã™
- **Code generation options** ... **`Generate C++ code` ã«ãƒã‚§ãƒƒã‚¯ã‚’ã¤ã‘ã¾ã™**

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ `pico-jxglib` ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ç½®ãŒä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¨æƒ³å®šã—ã¾ã™ã€‚

```text
+-[pico-jxglib]
+-[lcdtest]
  +-CMakeLists.txt
  +-lcdtest.cpp
  +- ...
```

`CMakeLists.txt` ã®æœ€å¾Œã«ä»¥ä¸‹ã®è¡Œã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

```cmake:CMakeLists.txt
target_link_libraries(lcdtest jxglib_ST7789 jxglib_DrawableTest)
add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/../pico-jxglib pico-jxglib)
```

ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚

```cpp:lcdtest.cpp
#include <stdio.h>
#include "pico/stdlib.h"
#include "jxglib/ST7789.h"
#include "jxglib/DrawableTest.h"

using namespace jxglib;

int main()
{
    ::stdio_init_all();
    ::spi_init(spi1, 125 * 1000 * 1000);
    GPIO14.set_function_SPI1_SCK();
    GPIO15.set_function_SPI1_TX();
    ST7789 display(spi1, 240, 320, {RST: GPIO10, DC: GPIO11, CS: GPIO12, BL: GPIO13});
    display.Initialize(Display::Dir::Rotate0);
    DrawableTest::RotateImage(display);
    //DrawableTest::DrawString(display);
    //DrawableTest::DrawFonts(display);
}
```

`DrawableTest::` ã§å§‹ã¾ã‚‹é–¢æ•°ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤–ã—ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’[ãƒ“ãƒ«ãƒ‰ãƒ»æ›¸ãè¾¼ã¿ãƒ»å®Ÿè¡Œ](https://zenn.dev/ypsitau/articles/2025-01-17-picosdk#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89)ã—ã¦ãã ã•ã„ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªè¡¨ç¤ºã‚’ã—ã¾ã™ã€‚

- `DrawableTest::RotateImage()` ã¯ LCD ã«ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å›è»¢ã—ã¦è¡¨ç¤ºã™ã‚‹ãƒ†ã‚¹ãƒˆç”¨é–¢æ•°ã§ã™ã€‚UART ã«ã¤ãªã’ãŸã‚·ãƒªã‚¢ãƒ«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰é©å½“ãªã‚­ãƒ¼ã‚’å…¥åŠ›ã™ã‚‹ã¨ç”»åƒã‚’ 90 åº¦ãšã¤å›è»¢ã—ã¦æç”»ã—ã¾ã™ã€‚
![lcdtest-RotateImage.jpg](/images/2025-01-27-tft-lcd/lcdtest-RotateImage.jpg)

- `DrawablTest::DrawString()` ã¯ã€€LCD ã®ç”»é¢ã„ã£ã±ã„ã«æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ãƒ†ã‚¹ãƒˆç”¨é–¢æ•°ã§ã™ã€‚UART ã«ã¤ãªã’ãŸã‚·ãƒªã‚¢ãƒ«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§æ“ä½œã™ã‚‹ã“ã¨ã§ã€ãƒ•ã‚©ãƒ³ãƒˆç¨®åˆ¥ãƒ»ãƒ•ã‚©ãƒ³ãƒˆã®æç”»å€ç‡ãƒ»è¡Œé–“éš”ã‚’å¤‰ãˆã‚‰ã‚Œã¾ã™ã€‚
![lcdtest-DrawString.jpg](/images/2025-01-27-tft-lcd/lcdtest-DrawString.jpg)

- `DrawablTest::DrawFonts()` ã¯ LCD ã«ç•°ãªã‚‹ãƒ•ã‚©ãƒ³ãƒˆã§æ–‡å­—åˆ—ã‚’è¡¨ç¤ºã™ã‚‹ãƒ†ã‚¹ãƒˆç”¨é–¢æ•°ã§ã™ã€‚
![lcdtest-DrawFonts.jpg](/images/2025-01-27-tft-lcd/lcdtest-DrawFonts.jpg)


### ä»–ã®ãƒ‡ãƒã‚¤ã‚¹ã®æ¥ç¶š

ST7789 ä»¥å¤–ã®ãƒ‡ãƒã‚¤ã‚¹ã‚’æ¥ç¶šã™ã‚‹å ´åˆã€ä¸Šã«ç¤ºã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚‚ã¨ã«ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

- **ST7789 (ãƒ”ã‚¯ã‚»ãƒ«æ•° 240x240)**
  ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã®é…ç·šã¯ä¸Šã«ç¤ºã—ãŸ ST7789 ã®å›³ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚ã“ã®ãƒ‡ãƒã‚¤ã‚¹ã«ã¯ CS (Chip Select) ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®å¯¾å¿œã™ã‚‹è¡Œã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™

  ```diff cpp:lcdtest.cpp
  - ST7789 display(spi1, 240, 320, {RST: GPIO10, DC: GPIO11, CS: GPIO12, BL: GPIO13});
  + ST7789 display(spi1, 240, 240, {RST: GPIO10, DC: GPIO11, BL: GPIO13});
  ```

- **ST7735 (ãƒ”ã‚¯ã‚»ãƒ«æ•° 80x160)**
  ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã®é…ç·šã¯ä¸Šã«ç¤ºã—ãŸ ST7789 ã®å›³ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚`CMakeLists.txt` ã¨ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®å¯¾å¿œã™ã‚‹ç®‡æ‰€ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™

  ```diff cmake:CMakeLists.txt
  - target_link_libraries(lcdtest jxglib_ST7789 jxglib_DrawableTest)
  + target_link_libraries(lcdtest jxglib_ST7735 jxglib_DrawableTest)
  ```

  ```diff cpp:lcdtest.cpp
  - #include "jxglib/ST7789.h"
  + #include "jxglib/ST7735.h"

  - ST7789 display(spi1, 240, 320, {RST: GPIO10, DC: GPIO11, CS: GPIO12, BL: GPIO13});
  + ST7735 display(spi1, 80, 160, {RST: GPIO10, DC: GPIO11, CS: GPIO12, BL: GPIO13});
  ```

- **ST7735 (ãƒ”ã‚¯ã‚»ãƒ«æ•° 128x160)**
  ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã®é…ç·šã¯ä¸Šã«ç¤ºã—ãŸ ST7789 ã®å›³ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚`CMakeLists.txt` ã¨ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®å¯¾å¿œã™ã‚‹ç®‡æ‰€ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™

  ```diff cmake:CMakeLists.txt
  - target_link_libraries(lcdtest jxglib_ST7789 jxglib_DrawableTest)
  + target_link_libraries(lcdtest jxglib_ST7735 jxglib_DrawableTest)
  ```

  ```diff cpp:lcdtest.cpp
  - #include "jxglib/ST7789.h"
  + #include "jxglib/ST7735.h"

  - ST7789 display(spi1, 240, 320, {RST: GPIO10, DC: GPIO11, CS: GPIO12, BL: GPIO13});
  + ST7735::TypeB display(spi1, 128, 160, {RST: GPIO10, DC: GPIO11, CS: GPIO12, BL: GPIO13});
  ```

- **ILI9341**
  ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã®é…ç·šã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™
  ![circuit-ili9341.png](/images/2025-01-27-tft-lcd/circuit-ili9341.png)
  `CMakeLists.txt` ã¨ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®å¯¾å¿œã™ã‚‹ç®‡æ‰€ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™

  ```diff cmake:CMakeLists.txt
  - target_link_libraries(lcdtest jxglib_ST7789 jxglib_DrawableTest)
  + target_link_libraries(lcdtest jxglib_ILI9341 jxglib_DrawableTest)
  ```

  ```diff cpp:lcdtest.cpp
  - #include "jxglib/ST7789.h"
  + #include "jxglib/ILI9341.h"

  - ST7789 display(spi1, 240, 320, {RST: GPIO10, DC: GPIO11, CS: GPIO12, BL: GPIO13});
  + ILI9341 display(spi1, 240, 320, {RST: GPIO10, DC: GPIO11, CS: GPIO12, BL: GPIO13});
  ```

- **ILI9488**
  ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã®é…ç·šã¯ä¸Šã«ç¤ºã—ãŸ ILI9341 ã®å›³ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚`CMakeLists.txt` ã¨ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®å¯¾å¿œã™ã‚‹ç®‡æ‰€ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™

  ```diff cmake:CMakeLists.txt
  - target_link_libraries(lcdtest jxglib_ST7789 jxglib_DrawableTest)
  + target_link_libraries(lcdtest jxglib_ILI9488 jxglib_DrawableTest)
  ```

  ```diff cpp:lcdtest.cpp
  - #include "jxglib/ST7789.h"
  + #include "jxglib/ILI9488.h"

  - ST7789 display(spi1, 240, 320, {RST: GPIO10, DC: GPIO11, CS: GPIO12, BL: GPIO13});
  + ILI9488 display(spi1, 320, 480, {RST: GPIO10, DC: GPIO11, CS: GPIO12, BL: GPIO13});
  ```
