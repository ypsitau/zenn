---
title: "Pico ボードに SD カードと RTC モジュールを接続! ストレージ機能を充実させよう"
emoji: "🐷"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["zennfes2025free", "raspberrypi", "pico", "sdcard", "rtc"]
published: true
published_at: 2025-10-22 09:00
---
[pico-jxgLABO](https://zenn.dev/ypsitau/articles/2025-08-01-labo-intro) は、USB ケーブル一本でマイコンボード RaspberryPi Pico の様々な機能を試すことができる実験プラットフォームです。

今回は、pico-jxgLABO を使って Pico ボードに SD カードと RTC (Real Time Clock) モジュールを接続します。

pico-jxgLABO では、Pico ボードのフラッシュメモリの一部を `L:` ドライブとしてマウントし、ファイルの読み書きができるようにしています。このドライブの容量は、Pico2 ボードの場合で約 2.5 MByte、Pico ボードですと 0.5 MByte (500 KByte) 程度です。テキストデータの保存程度ならば実用的に使えますが、画像データや音声データなどの大容量データを扱うには不十分です。

SD カードを接続すれば、数 GByte の大容量ストレージが利用できるようになり、Pico ボードの活用範囲が大きく広がります。SD カードは安価で入手しやすく、Pico ボードの SPI インターフェースに接続して使うことができます。

さらに、RTC モジュールを接続すると、現在時刻を正確に管理することが可能になり、ファイルを作成・更新したときのタイムスタンプを記録できます。RTC モジュールは I2C インターフェースに接続して使います。

pico-jxgLABO を使うと、コマンド操作でこれらのデバイスの接続を簡単に行うことができます。Pico ボードに SD カードと RTC モジュールを接続して、ストレージ機能を充実させましょう!

## 接続するデバイスについて

### SD カードリーダモジュール

SD カードのインターフェース回路はカード内部に組み込まれているので、SD カードのピンを直接 Pico ボードに接続して使用することもできます。しかし、リムーバブルメディアとしての使い勝手を考えると、カードスロットを備えた SD カードリーダモジュールを使うことになるでしょう。ここで問題になるのは、モジュールの種類と接続方法です。SD カードリーダモジュールは、基本的に SD カードスロットといくつかの抵抗やボルテージレギュレータが載っているだけのシンプルなものですが、供給電圧や信号のレベル、プルアップ抵抗の有無などが異なるので注意が必要です。

以下に、手元にあった SD カードリーダモジュール (主に Amazon で入手) の電源電圧やプルアップ抵抗の有無、信号レベルについてまとめました。

|外観|注釈|
|----|----|
|![sdcard-adapter](/images/2025-06-06-fs-media/sdcard-adapter.jpg)|標準 SD カードのモジュールです。供給電圧は **5V** と **3.3V** の両方の端子が用意されていて、5V の場合はボルテージレギュレータで 3.3V に降圧して SD カードに供給されます。すべての信号線に 10kΩ のプルアップ抵抗がついているので、外部のプルアップ抵抗は**必要ありません**。信号レベルは **3.3V** なので、5V 系の場合はレベルシフトが必要です|
|![ILI9341-back](/images/2025-06-06-fs-media/ILI9341-back.jpg)|TFT LCD ILI9341 についている SD カードのスロットです。電源は TFT LCD 用のコネクタから **3.3V** を供給します。外部のプルアップ抵抗が**必要です**[^pullup]。信号レベルは **3.3V** なので、5V 系の場合はレベルシフトが必要です|
|![u-sdcard-adapter-1](/images/2025-06-06-fs-media/u-sdcard-adapter-1.jpg)|microSD カードのモジュールです。供給電圧は **5V** で、ボルテージレギュレータで 3.3V に降圧して SD カードに供給されます。外部のプルアップ抵抗は**必要ありません**。信号線にはバッファ (74HC125) が入っており、**3.3V**、**5V** の両方の信号レベルに接続できます|
|![u-sdcard-adapter-2](/images/2025-06-06-fs-media/u-sdcard-adapter-2.jpg)|microSD カードのモジュールです。供給電圧は **3.3V** です。すべての信号線に 10kΩ のプルアップ抵抗がついているので、外部のプルアップ抵抗は**必要ありません**。信号レベルは **3.3V** なので、5V 系の場合はレベルシフトが必要です|

[^pullup]: 手元の SD カードで試したところ、プルアップ抵抗がなくても動作しましたが、SD カードの種類によってはプルアップ抵抗が必要な場合があります。動作しない場合は、プルアップ抵抗の有無を確認してください。

### RTC モジュール

RTC（Real-Time Clock）は、リアルタイムの日時を保持するためのハードウェアです。初代 Pico (RP2040) にはチップ内に RTC が内蔵されていて、「お、これで外付けハードウェアなしに日時情報を得られるぞ」とちょっと色めきだつのですが、残念ながら電源を切ると日時情報が失われてしまうので、あまり実用的ではありません。何にせよ、後継の Pico2 (RP2350) ではこのモジュールが取り除かれてしまったので、実使用の候補にはならないでしょう。

RTC を使う実用的な方法は、Pico ボードにバックアップ電池を装備した RTC モジュールを接続することです。これで Pico ボードの電源状態にかかわらず日時情報を保持できるようになります。

電子工作でよく使われている RTC モジュールというと、I2C で接続ができる DS3231 がよく挙げられます。DS1307 という廉価版もありますが、一日に数秒もずれるらしいので、わずかな価格差で高精度な DS3231 を使うのが良いでしょう。

僕が Amazon で購入した DS3231 モジュールは、以下のようなものです。

![rtc-ds3231](/images/2025-06-22-rtc/rtc-ds3231.jpg)

バックアップ電池が初めから装備されていますし、コンパクトな形状をしているのが良い感じです。基板に印刷されている信号名が分かりづらいのですが、以下のように対応しています。

|基板上の印字|信号名|
|------|-----|
|`+`   |VCC  |
|`D`   |SDA  |
|`C`   |SCL  |
|`-`   |GND  |

## pico-jxgLABO の書き込み

Pico ボードへの pico-jxgLABO の書き込みと基本的な使い方は[こちら](https://zenn.dev/ypsitau/articles/2025-08-01-labo-intro#pico-jxglabo-%E3%81%AE%E5%B0%8E%E5%85%A5%E6%96%B9%E6%B3%95)。特別なハードウェアは必要なく、Pico W や Pico 2 W ボードを USB ケーブルで PC に接続するだけで始められます。

この記事で説明する実験を行うには、バージョン **0.4.0** 以降の pico-jxgLABO が Pico ボードに書き込まれている必要があります。ターミナルソフトで `about-me` コマンドを実行すると pico-jxgLABO のバージョンを確認できます。

```text
L:/>about-me
Program Information
 name:              pico-jxgLABO
 version:           0.4.0
     :
     :
```

![circuit-sdcard](/images/2025-10-22-labo-sdcard-rtc/circuit-sdcard.png)

![circuit-rtc](/images/2025-10-22-labo-sdcard-rtc/circuit-rtc.png)
